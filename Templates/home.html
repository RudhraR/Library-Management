{% extends "base.html" %}
{%block title%}
Librarian home
{%endblock%}
{%block content%}

    <div class="display_books">
        <br><h4 style="text-align:center;color:gray"> Available e-books in the Library </h4><br>
        <div class="container">
          {%for section in sections%}
                <div class="card bg-light border-secondary">
                  <h5 class="card-header">{{section.section_name}}</h5>
                  <div class="card-body">
            <div class="row">
              {% if section.books%}
                {% for book in section.books %}
                  <div class="books-list col-sm-3">
                    <div class="card" style="width: 13rem;">     
                    <img class="card-img-top" src="{{book.book_image}}" alt="{{book.book_name}}" style="height: 250px; width: 207px;" >
                    <div class="card-body" style="font-size:15px;">
                      <a href="{{url_for('book_details',book_id=book.book_id)}}">{{book.book_name}}</a><br>
                      <p class="card-text" style="font-size:12px;">
                        Author: {{book.author}}<br>
                    </p>

                    {%if user.role=="librarian"%}
                      <a href="{{url_for('edit_book', book_id=book.book_id)}}" class="btn btn-primary btn-sm">Edit</a>
                      <button type="button" class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#delete_modal">
                        Delete </button>
                    {%else%}
                      <a href="{{url_for('book_details',book_id=book.book_id)}}" class="btn btn-primary btn-sm">Go to book details</a>
                      <button type="button" class="btn btn-warning btn-sm">Add to cart & buy</button>
                    {%endif%}
                      <!-- Modal -->
                      <div class="modal fade" id="delete_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Delete confirmation</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              Are you sure you want to delete this book?
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <a href="{{url_for('delete_book', book_id=book.book_id)}}" class="btn btn-danger">Delete book</a>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>              
                  </div>           
        </div>{% endfor %}
        {%else%}
        <em>There are no books added in this section right now..</em>
        {%endif%}
    </div></div></div><br>{%endfor%}
    
  </div>
</div>

{%endblock%}